<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Spider-2</title>
    <link href="block.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
</head>

<body>
    <div class="navbar-fixed">
        <nav style="background-color: rgba(52,53,44,0.8)">
            <div class="nav-wrapper" style="width:95%;margin-left:2.5%;">
                <a href="#" class="brand-logo">Spider-2</a>
                <ul id="nav-mobile" class="right hide-on-med-and-down">
                    <li>
                        <a href="explore.html">探索</a>
                    </li>
                    <li>
                        <a href="index.html">编程</a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
    <div style="margin-top: 40px; height:100%;">
        <div class="menu-column">
            <div class="menu"></div>
        </div>
        <div class="script-column">
            <div class="script"></div>
        </div>
        <div class="panel-column">
            <button class="btn waves-effect waves-light clear-action">Clear
            </button>
            <button class="btn waves-effect waves-light save-action">Save
            </button>
            <button class="btn waves-effect waves-light load-action">Load
            </button>
            <button class="btn waves-effect waves-light run-action" id="run-action">Run
                <i class="material-icons right">send</i>
            </button>
            <br/>
            <img id="img" alt="img" src="a" />
        </div>

    </div>
</body>

<script src="util.js" type="text/javascript"></script>
<script src="drag.js" type="text/javascript"></script>
<script src="file.js" type="text/javascript"></script>
<script src="block.js" type="text/javascript"></script>
<script src="menu.js" type="text/javascript"></script>
<script src="turtle.js" type="text/javascript"></script>
<script type="text/javascript" src="mind-framework.js"></script>
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
<script type="text/javascript">
    (function (global) {
        'use strict';

        document.getElementById("run-action").onclick = function () {
            console.log(global.file.scriptToJson())
        }

        mind.init({
            callback: function (robot) {
                var skillID = "SensorWalkSkill";
                robot.connectSkill({
                    skillID: skillID,
					callback: robot.onRecvSkillData(function(skillID, data) {
						document.getElementById('img').setAttribute( 'src', 'data:image/png;base64,'+data);
					})
                });
                document.getElementById("run-action").onclick = function () {
                    console.log(global.file.scriptToJson())
                    robot.sendData({
                        skillID: skillID,
                        // data: "start",
                        data: global.file.scriptToJson(),
                    })
                }
            }
        });
    })(window);


</script>

</html>